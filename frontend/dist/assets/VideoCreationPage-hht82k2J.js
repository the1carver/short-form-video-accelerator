import{b as I,u as L,r as l,j as e,a as p}from"./index-Bwe2kUSu.js";import{s as h,a as V}from"./toast-utils-DTLmeJpV.js";const D=()=>{var v,y,N;const{contentId:o}=I(),g=L(),[a,f]=l.useState(null),[r,w]=l.useState(""),[d,k]=l.useState([]),[S,b]=l.useState(!0),[x,u]=l.useState(!1),[s,c]=l.useState("segments");l.useEffect(()=>{(async()=>{try{if(b(!0),o){const i=await p.endpoints.content.getContent(o),n=await p.endpoints.content.getTemplates(),P={id:o,title:"How to Optimize Your LinkedIn Profile",description:"Learn the best practices for creating a standout LinkedIn profile that attracts recruiters and opportunities.",duration:1245,url:"https://example.com/videos/linkedin-tips.mp4",thumbnail_url:"https://via.placeholder.com/640x360?text=LinkedIn+Tips",created_at:"2025-03-20T14:30:00Z",segments:[{id:"1",start_time:0,end_time:120,transcript:"Welcome to this guide on optimizing your LinkedIn profile. Today we'll cover the key elements that make your profile stand out to recruiters and potential connections.",confidence:.95,selected:!1},{id:"2",start_time:121,end_time:240,transcript:"First, let's talk about your profile photo. A professional headshot increases profile views by 14 times. Make sure it's recent and represents how you look in a professional setting.",confidence:.92,selected:!1},{id:"3",start_time:241,end_time:360,transcript:"Next, your headline. Don't just list your job title. Use this space to highlight your expertise and value proposition in 120 characters or less.",confidence:.88,selected:!1},{id:"4",start_time:361,end_time:480,transcript:"Your about section should tell your professional story in a compelling way. Include your achievements, skills, and what you're passionate about.",confidence:.91,selected:!1},{id:"5",start_time:481,end_time:600,transcript:"Skills and endorsements matter. List at least 5 key skills relevant to your industry and ask colleagues to endorse them.",confidence:.94,selected:!1}]},E=[{id:"1",name:"TikTok Explainer",description:"Short, engaging explainer template optimized for TikTok with captions and music.",thumbnail_url:"https://via.placeholder.com/300x500?text=TikTok+Explainer"},{id:"2",name:"Product Showcase",description:"Highlight your product features with this dynamic template.",thumbnail_url:"https://via.placeholder.com/300x500?text=Product+Showcase"},{id:"3",name:"Tutorial Steps",description:"Break down complex processes into simple steps.",thumbnail_url:"https://via.placeholder.com/300x500?text=Tutorial+Steps"}];f((i==null?void 0:i.data)||P),k((n==null?void 0:n.data)||E)}}catch(i){console.error("Error fetching data:",i),h("Failed to load content data")}finally{b(!1)}})()},[o]);const j=t=>{a&&f({...a,segments:a.segments.map(i=>i.id===t?{...i,selected:!i.selected}:i)})},C=t=>{w(t)},T=()=>{if(s==="segments"){if(!(a!=null&&a.segments.some(t=>t.selected))){h("Please select at least one segment");return}c("template")}else if(s==="template"){if(!r){h("Please select a template");return}c("preview")}},_=()=>{s==="template"?c("segments"):s==="preview"&&c("template")},$=async()=>{if(!(!a||!r))try{u(!0);const t=a.segments.filter(i=>i.selected).map(i=>i.id);await p.endpoints.content.createVideo({contentId:a.id,templateId:r,segments:t}),setTimeout(()=>{u(!1),V("Video created successfully!"),g("/")},2e3)}catch(t){console.error("Error creating video:",t),h("Failed to create video"),u(!1)}},m=t=>{const i=Math.floor(t/60),n=Math.floor(t%60);return`${i}:${n.toString().padStart(2,"0")}`};return S?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:a.title}),e.jsx("p",{className:"text-gray-600",children:a.description})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${s==="segments"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"1"}),e.jsx("div",{className:`flex-1 h-1 mx-2 ${s==="segments"?"bg-gray-200":"bg-blue-600"}`}),e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${s==="template"||s==="preview"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"2"}),e.jsx("div",{className:`flex-1 h-1 mx-2 ${s==="preview"?"bg-blue-600":"bg-gray-200"}`}),e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${s==="preview"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"3"})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:`text-sm ${s==="segments"?"text-blue-600 font-medium":"text-gray-500"}`,children:"Select Segments"}),e.jsx("span",{className:`text-sm ${s==="template"?"text-blue-600 font-medium":"text-gray-500"}`,children:"Choose Template"}),e.jsx("span",{className:`text-sm ${s==="preview"?"text-blue-600 font-medium":"text-gray-500"}`,children:"Preview and Create"})]})]}),s==="segments"&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Content Segments"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Choose the segments you want to include in your short-form video."})]}),e.jsx("div",{className:"divide-y",children:a.segments.map(t=>e.jsx("div",{className:`p-6 hover:bg-gray-50 cursor-pointer ${t.selected?"bg-blue-50":""}`,onClick:()=>j(t.id),children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",checked:t.selected,onChange:()=>j(t.id),className:"mt-1 h-5 w-5 text-blue-600 rounded"}),e.jsxs("div",{className:"ml-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[m(t.start_time)," - ",m(t.end_time)]}),e.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[Math.round(t.confidence*100),"% confidence"]})]}),e.jsx("p",{className:"text-gray-700",children:t.transcript})]})]})},t.id))})]}),s==="template"&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Choose a Template"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Select a template for your short-form video."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-6",children:d.map(t=>e.jsxs("div",{className:`border rounded-lg overflow-hidden cursor-pointer transition-all ${r===t.id?"border-blue-500 ring-2 ring-blue-500 ring-opacity-50":"border-gray-200 hover:border-blue-300"}`,onClick:()=>C(t.id),children:[e.jsx("div",{className:"h-64 bg-gray-100",children:e.jsx("img",{src:t.thumbnail_url,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]})]},t.id))})]}),s==="preview"&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Preview and Create"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Review your selections and create your short-form video."})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Selected Template"}),e.jsx("div",{className:"flex items-center",children:r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:(v=d.find(t=>t.id===r))==null?void 0:v.thumbnail_url,alt:"Template",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-medium",children:(y=d.find(t=>t.id===r))==null?void 0:y.name}),e.jsx("p",{className:"text-sm text-gray-600",children:(N=d.find(t=>t.id===r))==null?void 0:N.description})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Selected Segments"}),e.jsx("div",{className:"border rounded-lg divide-y",children:a.segments.filter(t=>t.selected).map(t=>e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between mb-1",children:e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[m(t.start_time)," - ",m(t.end_time)]})}),e.jsx("p",{className:"text-sm text-gray-700",children:t.transcript})]},t.id))}),a.segments.filter(t=>t.selected).length===0&&e.jsx("p",{className:"text-red-600 text-sm",children:"No segments selected. Please go back and select segments."})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx("button",{onClick:_,className:`px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 ${s==="segments"?"invisible":""}`,children:"Previous"}),s==="preview"?e.jsx("button",{onClick:$,disabled:x||a.segments.filter(t=>t.selected).length===0,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors ${x||a.segments.filter(t=>t.selected).length===0?"opacity-50 cursor-not-allowed":""}`,children:x?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Video..."]}):"Create Video"}):e.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Next"})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-md",children:[e.jsx("p",{className:"text-red-700",children:"Content not found or failed to load."}),e.jsx("button",{onClick:()=>g("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})})};export{D as default};

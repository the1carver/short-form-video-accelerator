import{r as a,u as P,j as e,a as D}from"./index-RQDsan70.js";import{s as r,a as S}from"./toast-utils-CGqbRZYm.js";const U=()=>{const[i,c]=a.useState(null),[u,g]=a.useState(""),[p,j]=a.useState(""),[l,h]=a.useState(!1),[f,b]=a.useState(0),m=a.useRef(null),v=P(),w=t=>{if(t.target.files&&t.target.files.length>0){const s=t.target.files[0];if(!["video/mp4","video/quicktime","video/x-msvideo","video/webm"].includes(s.type)){r("Please select a valid video file (MP4, MOV, AVI, or WebM)");return}const n=100*1024*1024;if(s.size>n){r("File size exceeds 100MB limit");return}c(s)}},y=t=>{t.preventDefault(),t.stopPropagation()},N=t=>{if(t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&t.dataTransfer.files.length>0){const s=t.dataTransfer.files[0];if(!["video/mp4","video/quicktime","video/x-msvideo","video/webm"].includes(s.type)){r("Please select a valid video file (MP4, MOV, AVI, or WebM)");return}const n=100*1024*1024;if(s.size>n){r("File size exceeds 100MB limit");return}c(s)}},k=async t=>{var s;if(t.preventDefault(),!i){r("Please select a video file");return}if(!u.trim()){r("Please enter a title");return}try{h(!0);const o=new FormData;o.append("file",i),o.append("title",u),o.append("description",p);const n={onUploadProgress:x=>{if(x.total){const F=Math.round(x.loaded*100/x.total);b(F)}}},d=await D.endpoints.content.upload(o,n);S("Video uploaded successfully!"),(s=d==null?void 0:d.data)!=null&&s.id?v(`/create/${d.data.id}`):v("/")}catch(o){console.error("Error uploading video:",o),r("Failed to upload video. Please try again.")}finally{h(!1),b(0)}},M=()=>{m.current&&m.current.click()},C=t=>t<1024?t+" bytes":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB";return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Upload Content"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Upload your long-form video content to transform into short-form videos."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:u,onChange:t=>g(t.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter a title for your video",disabled:l,required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),e.jsx("textarea",{id:"description",value:p,onChange:t=>j(t.target.value),rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter a description for your video",disabled:l})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video File"}),e.jsx("div",{className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md ${i?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:y,onDrop:N,children:e.jsxs("div",{className:"space-y-1 text-center",children:[i?e.jsxs("div",{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.jsx("span",{className:"font-medium",children:i.name})}),e.jsx("p",{className:"text-xs text-gray-500",children:C(i.size)}),e.jsx("button",{type:"button",className:"mt-2 text-sm text-blue-600 hover:text-blue-500",onClick:()=>c(null),disabled:l,children:"Change file"})]}):e.jsxs("div",{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[e.jsx("button",{type:"button",className:"font-medium text-blue-600 hover:text-blue-500",onClick:M,disabled:l,children:"Browse for files"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"MP4, MOV, AVI, or WebM up to 100MB"})]}),e.jsx("input",{ref:m,id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"video/mp4,video/quicktime,video/x-msvideo,video/webm",onChange:w,disabled:l})]})})]}),l&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200",children:"Uploading"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-semibold inline-block text-blue-600",children:[f,"%"]})})]}),e.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200",children:e.jsx("div",{style:{width:`${f}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 transition-all duration-300"})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:l||!i,className:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${l||!i?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:l?"Uploading...":"Upload Video"})})]})})}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Tips for best results"}),e.jsxs("ul",{className:"list-disc pl-5 text-blue-700 text-sm space-y-1",children:[e.jsx("li",{children:"Upload high-quality videos for better output"}),e.jsx("li",{children:"Videos with clear audio will produce more accurate transcriptions"}),e.jsx("li",{children:"Content with distinct segments works best for short-form transformation"}),e.jsx("li",{children:"Ensure your video has good lighting and clear visuals"}),e.jsx("li",{children:"Videos between 5-30 minutes tend to work best"})]})]})]})};export{U as default};
